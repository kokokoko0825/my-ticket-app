rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // 認証されたユーザーのみアクセス可能（全コレクション対応）
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // テスト用のコレクション（デバッグ目的）
    match /test/{document} {
      allow read, write: if request.auth != null;
    }
    
    // チケットコレクション
    match /tickets/{document} {
      allow read, write: if request.auth != null;
    }
    
    // イベントコレクション
    match /events/{document} {
      allow read, write: if request.auth != null;
    }
    
    // ユーザーコレクション
    match /users/{document} {
      allow read, write: if request.auth != null;
    }
    
    // その他のコレクション
    match /products/{document} {
      allow read, write: if request.auth != null;
    }
    
    // グローバルコレクション登録簿
    match /global_collections/{document} {
      allow read, write: if request.auth != null;
    }
    
    // 動的に作成される任意のコレクション（イベントタイトル名など）
    // 認証されたユーザーのみアクセス可能
    match /{collectionId}/{document} {
      allow read, write: if request.auth != null;
    }
  }
}